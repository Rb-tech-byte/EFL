import{d as u,u as S,j as e,H as A,e as E}from"./vendor-BLTBOi2W.js";import{A as M}from"./AuthenticatedLayout-DNdVW90a.js";import{M as P}from"./Modal-BhZ5tikr.js";import{I as l}from"./InputLabel-eLaPbUJo.js";import{T as n}from"./TextInput-C-k5QKru.js";import{I as i}from"./InputError-SIa_hYom.js";import{P as h}from"./PrimaryButton-BTZcH_bs.js";import{S as $}from"./SecondaryButton-B17rFZm-.js";import{R as I}from"./RichTextEditor-AJXUfUDP.js";import"./ApplicationLogo-CUVqsJO0.js";function G({books:c,authors:p,categories:g}){const[j,d]=u.useState(!1),[o,x]=u.useState(null),{data:t,setData:a,post:f,put:v,delete:y,processing:b,errors:r,reset:N}=S({title:"",author_id:"",category_id:"",description:"",type:"ebook",price:0,is_free:!1,status:"pending",cover_image:"",file_path:""}),_=()=>{x(null),N(),d(!0)},w=s=>{x(s),a({title:s.title||"",author_id:s.author_id||"",category_id:s.category_id||"",description:s.description||"",type:s.type||"ebook",price:s.price||0,is_free:!!s.is_free,status:s.status||"pending",cover_image:s.cover_image||"",file_path:s.file_path||""}),d(!0)},C=s=>{s.preventDefault(),o?v(route("admin.books.update",o.id),{onSuccess:()=>d(!1)}):f(route("admin.books.store"),{onSuccess:()=>d(!1)})},k=s=>{confirm("Are you sure you want to delete this book?")&&y(route("admin.books.destroy",s))},B=(s,F)=>{const m=F==="published"?"unpublish":"publish";confirm(`Are you sure you want to ${m} this book?`)&&E.patch(route(`admin.books.${m}`,s))};return e.jsxs(M,{header:"Manage Books",children:[e.jsx(A,{title:"Manage Books"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Book Management"}),e.jsx("p",{className:"text-gray-600",children:"Overview of all content in the marketplace."})]}),e.jsx(h,{onClick:_,children:"+ Add New Book"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Book"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Author"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.data.length>0?c.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-14 bg-gray-100 rounded overflow-hidden flex-shrink-0",children:s.cover_image?e.jsx("img",{src:s.cover_image,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400",children:"ðŸ“–"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:s.title}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase",children:s.type})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 font-medium",children:s.author_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.category_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.is_free?"Free":`$${s.price}`}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["$",s.total_revenue||0]}),e.jsxs("p",{className:"text-[10px] text-gray-500",children:[s.sales_count||0," sales"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-[10px] font-bold uppercase ${s.status==="published"?"bg-green-100 text-green-700":s.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>B(s.id,s.status),className:`px-3 py-1 rounded-lg text-xs font-bold transition-colors ${s.status==="published"?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`,children:s.status==="published"?"Unpublish":"Publish"}),e.jsx("button",{onClick:()=>w(s),className:"text-indigo-600 hover:text-indigo-900 text-sm font-bold",children:"Edit"}),e.jsx("button",{onClick:()=>k(s.id),className:"text-rose-600 hover:text-rose-900 text-sm font-bold",children:"Delete"})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-20 text-center text-gray-500 font-medium italic",children:"No books found. Add your first book to get started!"})})})]})})})]}),e.jsx(P,{show:j,onClose:()=>d(!1),maxWidth:"2xl",children:e.jsxs("form",{onSubmit:C,className:"p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-8 border-b pb-4",children:o?"âœï¸ Edit Book":"ðŸ“š Add New Book"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"title",value:"Book Title"}),e.jsx(n,{id:"title",className:"mt-1 block w-full",value:t.title,onChange:s=>a("title",s.target.value),required:!0}),e.jsx(i,{message:r.title,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"author_id",value:"Author"}),e.jsxs("select",{id:"author_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm h-12",value:t.author_id,onChange:s=>a("author_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Author"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(i,{message:r.author_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category_id",value:"Category"}),e.jsxs("select",{id:"category_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm h-12",value:t.category_id,onChange:s=>a("category_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(i,{message:r.category_id,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",value:"Full Description"}),e.jsx(I,{id:"description",value:t.description,onChange:s=>a("description",s),placeholder:"Enter full book description..."}),e.jsx(i,{message:r.description,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"type",value:"Content Type"}),e.jsxs("select",{id:"type",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm h-12",value:t.type,onChange:s=>a("type",s.target.value),required:!0,children:[e.jsx("option",{value:"ebook",children:"E-Book"}),e.jsx("option",{value:"audiobook",children:"Audio Book"}),e.jsx("option",{value:"course",children:"Course"})]}),e.jsx(i,{message:r.type,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"price",value:"Price ($)"}),e.jsx(n,{id:"price",type:"number",step:"0.01",className:"mt-1 block w-full",value:t.price,onChange:s=>a("price",parseFloat(s.target.value)),required:!t.is_free,disabled:t.is_free}),e.jsx(i,{message:r.price,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center pt-8",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:t.is_free,onChange:s=>a("is_free",s.target.checked)}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-colors ${t.is_free?"bg-indigo-600":"bg-gray-200"}`}),e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${t.is_free?"translate-x-4":""}`})]}),e.jsx("span",{className:"text-sm font-bold text-gray-700 group-hover:text-gray-900 transition-colors",children:"Mark as Free"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"Publishing Status"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm h-12",value:t.status,onChange:s=>a("status",s.target.value),required:!0,children:[e.jsx("option",{value:"pending",children:"Pending Review"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsx(i,{message:r.status,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cover_image",value:"Cover Image URL"}),e.jsx(n,{id:"cover_image",className:"mt-1 block w-full",value:t.cover_image,onChange:s=>a("cover_image",s.target.value),placeholder:"https://..."}),e.jsx(i,{message:r.cover_image,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"file_path",value:"Upload/File Path (Optional for now)"}),e.jsx(n,{id:"file_path",className:"mt-1 block w-full",value:t.file_path,onChange:s=>a("file_path",s.target.value),placeholder:"storage/books/..."}),e.jsx(i,{message:r.file_path,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-10 flex justify-end gap-3 border-t pt-6",children:[e.jsx($,{onClick:()=>d(!1),className:"px-6",children:"Cancel"}),e.jsx(h,{disabled:b,className:"px-8 bg-indigo-600 hover:bg-indigo-700",children:o?"Update Details":"Save Book"})]})]})})]})}export{G as default};
