import{d as u,u as S,j as e,H as k,e as R}from"./vendor-BLTBOi2W.js";import{A as M}from"./AuthenticatedLayout-DNdVW90a.js";import{M as E}from"./Modal-BhZ5tikr.js";import{I as n}from"./InputLabel-eLaPbUJo.js";import{T as p}from"./TextInput-C-k5QKru.js";import{I as l}from"./InputError-SIa_hYom.js";import{P as h}from"./PrimaryButton-BTZcH_bs.js";import{S as F}from"./SecondaryButton-B17rFZm-.js";import"./ApplicationLogo-CUVqsJO0.js";function L({authors:d,users:g}){const[j,t]=u.useState(!1),[r,c]=u.useState(null),{data:o,setData:a,post:b,put:f,delete:y,processing:v,errors:i,reset:N}=S({user_id:"",pen_name:"",bio:"",commission_rate:10,status:"pending"}),w=()=>{c(null),N(),t(!0)},_=s=>{c(s),a({user_id:s.user_id||"",pen_name:s.pen_name||"",bio:s.bio||"",commission_rate:s.commission_rate||10,status:s.status||"pending"}),t(!0)},A=s=>{s.preventDefault(),r?f(route("admin.authors.update",r.id),{onSuccess:()=>t(!1)}):b(route("admin.authors.store"),{onSuccess:()=>t(!1)})},C=s=>{confirm("Are you sure you want to delete this author? This will not delete the user account.")&&y(route("admin.authors.destroy",s))},m=(s,x)=>{confirm(`Are you sure you want to ${x} this author?`)&&R.patch(`/admin/authors/${s}/${x}`)};return e.jsxs(M,{header:"Manage Authors",children:[e.jsx(k,{title:"Manage Authors"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Author Management"}),e.jsx("p",{className:"text-gray-600",children:"Review author applications and manage existing profiles."})]}),e.jsx(h,{onClick:w,children:"+ Register New Author"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Author"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase",children:"Registered"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase text-center",children:"Books"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase text-center",children:"Comm. (%)"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase text-center",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-sm font-bold text-gray-700 uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.data.length>0?d.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold border-2 border-white shadow-sm",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 lowercase",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.created_at}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium text-center",children:s.books_count}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 font-bold text-center",children:[s.commission_rate,"%"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-[10px] font-bold uppercase ${s.status==="approved"?"bg-green-100 text-green-700":s.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(s.id,"approve"),className:"px-3 py-1 bg-green-50 text-green-700 border border-green-200 rounded-lg text-xs font-bold hover:bg-green-100 transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>m(s.id,"reject"),className:"px-3 py-1 bg-red-50 text-red-700 border border-red-200 rounded-lg text-xs font-bold hover:bg-red-100 transition-colors",children:"Reject"})]}),e.jsx("button",{onClick:()=>_(s),className:"text-indigo-600 hover:text-indigo-900 text-sm font-bold",children:"Edit"}),e.jsx("button",{onClick:()=>C(s.id),className:"text-rose-600 hover:text-rose-900 text-sm font-bold",children:"Delete"})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-20 text-center text-gray-500 font-medium italic",children:"No authors found. Register the first author to start!"})})})]})})})]}),e.jsx(E,{show:j,onClose:()=>t(!1),maxWidth:"xl",children:e.jsxs("form",{onSubmit:A,className:"p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-8 border-b pb-4",children:r?"✏️ Edit Author":"✍️ Register Author"}),e.jsxs("div",{className:"space-y-6",children:[!r&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"user_id",value:"Select User (Role: Author)"}),e.jsxs("select",{id:"user_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm h-12",value:o.user_id,onChange:s=>a("user_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a user"}),g.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]}),e.jsx(l,{message:i.user_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"pen_name",value:"Pen Name (Display Name)"}),e.jsx(p,{id:"pen_name",className:"mt-1 block w-full",value:o.pen_name,onChange:s=>a("pen_name",s.target.value),placeholder:"Public name..."}),e.jsx(l,{message:i.pen_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"bio",value:"Author Bio"}),e.jsx("textarea",{id:"bio",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm",rows:4,value:o.bio,onChange:s=>a("bio",s.target.value)}),e.jsx(l,{message:i.bio,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"commission_rate",value:"Commission Rate (%)"}),e.jsx(p,{id:"commission_rate",type:"number",className:"mt-1 block w-full",value:o.commission_rate,onChange:s=>a("commission_rate",parseInt(s.target.value)),required:!0}),e.jsx(l,{message:i.commission_rate,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"status",value:"Application Status"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm h-12",value:o.status,onChange:s=>a("status",s.target.value),required:!0,children:[e.jsx("option",{value:"pending",children:"Pending Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsx(l,{message:i.status,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mt-10 flex justify-end gap-3 border-t pt-6",children:[e.jsx(F,{onClick:()=>t(!1),className:"px-6",children:"Cancel"}),e.jsx(h,{disabled:v,className:"px-8 bg-indigo-600 hover:bg-indigo-700",children:r?"Update Profile":"Register Author"})]})]})})]})}export{L as default};
