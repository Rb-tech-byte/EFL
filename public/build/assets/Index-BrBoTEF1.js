import{d as x,u as S,j as e,H as F}from"./vendor-BLTBOi2W.js";import{A as I}from"./AuthenticatedLayout-DNdVW90a.js";import{C as M}from"./Card-DELLdyMY.js";import{T as E}from"./Table-DcKIl-Od.js";import{B as T}from"./Badge-lAHnXrxJ.js";import{M as q}from"./Modal-BhZ5tikr.js";import{I as i}from"./InputLabel-eLaPbUJo.js";import{T as m}from"./TextInput-C-k5QKru.js";import{I as l}from"./InputError-SIa_hYom.js";import{P as p}from"./PrimaryButton-BTZcH_bs.js";import{S as D}from"./SecondaryButton-B17rFZm-.js";import"./ApplicationLogo-CUVqsJO0.js";function Q({appointments:u,students:h,consultants:g}){const[j,o]=x.useState(!1),[d,c]=x.useState(null),{data:a,setData:t,post:f,put:v,delete:N,processing:y,errors:n,reset:b}=S({user_id:"",consultant_id:"",date:"",time:"",status:"pending",type:"virtual",notes:"",meeting_link:""}),_=()=>{c(null),b(),o(!0)},C=s=>{c(s),t({user_id:s.user_id,consultant_id:s.consultant_id||"",date:s.date,time:s.time,status:s.status,type:s.type,notes:s.notes||"",meeting_link:s.meeting_link||""}),o(!0)},k=s=>{s.preventDefault(),d?v(route("admin.appointments.update",d.id),{onSuccess:()=>o(!1)}):f(route("admin.appointments.store"),{onSuccess:()=>o(!1)})},w=s=>{confirm("Are you sure you want to delete this appointment?")&&N(route("admin.appointments.destroy",s))},A=[{header:"Student",accessor:"user.name",render:s=>s.user?.name||"N/A"},{header:"Date",accessor:"date"},{header:"Time",accessor:"time"},{header:"Status",render:s=>{let r="gray";return s.status==="confirmed"&&(r="green"),s.status==="cancelled"&&(r="red"),s.status==="pending"&&(r="yellow"),e.jsx(T,{variant:r,children:s.status})}},{header:"Consultant",accessor:"consultant.name",render:s=>s.consultant?.name||"Unassigned"}];return e.jsxs(I,{header:"Appointments",children:[e.jsx(F,{title:"Appointments"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Appointment Management"}),e.jsx(p,{onClick:_,children:"+ New Appointment"})]}),e.jsx(M,{children:e.jsx("div",{className:"p-0",children:e.jsx(E,{columns:A,data:u.data,pagination:u,actions:s=>e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>C(s),className:"text-indigo-600 hover:text-indigo-900 font-semibold",children:"Edit"}),e.jsx("button",{onClick:()=>w(s.id),className:"text-rose-600 hover:text-rose-900 font-semibold",children:"Delete"})]})})})})]}),e.jsx(q,{show:j,onClose:()=>o(!1),children:e.jsxs("form",{onSubmit:k,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-6",children:d?"Edit Appointment":"New Appointment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"user_id",value:"Student"}),e.jsxs("select",{id:"user_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.user_id,onChange:s=>t("user_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Student"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(l,{message:n.user_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"consultant_id",value:"Consultant"}),e.jsxs("select",{id:"consultant_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.consultant_id,onChange:s=>t("consultant_id",s.target.value),children:[e.jsx("option",{value:"",children:"Select Consultant"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(l,{message:n.consultant_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",value:"Date"}),e.jsx(m,{id:"date",type:"date",className:"mt-1 block w-full",value:a.date,onChange:s=>t("date",s.target.value),required:!0}),e.jsx(l,{message:n.date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"time",value:"Time"}),e.jsx(m,{id:"time",type:"time",className:"mt-1 block w-full",value:a.time,onChange:s=>t("time",s.target.value),required:!0}),e.jsx(l,{message:n.time,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.status,onChange:s=>t("status",s.target.value),required:!0,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx(l,{message:n.status,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"type",value:"Type"}),e.jsxs("select",{id:"type",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.type,onChange:s=>t("type",s.target.value),required:!0,children:[e.jsx("option",{value:"virtual",children:"Virtual"}),e.jsx("option",{value:"in-person",children:"In-Person"})]}),e.jsx(l,{message:n.type,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"meeting_link",value:"Meeting Link (URL)"}),e.jsx(m,{id:"meeting_link",type:"url",className:"mt-1 block w-full",value:a.meeting_link,onChange:s=>t("meeting_link",s.target.value),placeholder:"https://zoom.us/j/..."}),e.jsx(l,{message:n.meeting_link,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"notes",value:"Internal Notes"}),e.jsx("textarea",{id:"notes",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:3,value:a.notes,onChange:s=>t("notes",s.target.value)}),e.jsx(l,{message:n.notes,className:"mt-2"})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(D,{onClick:()=>o(!1),children:"Cancel"}),e.jsx(p,{disabled:y,children:d?"Update Appointment":"Schedule Appointment"})]})]})})]})}export{Q as default};
