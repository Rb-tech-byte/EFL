import{d as u,u as P,j as e,H as S,E,l as B,m as D}from"./vendor-BLTBOi2W.js";import{A as I}from"./AuthenticatedLayout-DNdVW90a.js";import{C as M}from"./Card-DELLdyMY.js";import{T as F}from"./Table-DcKIl-Od.js";import{B as T}from"./Badge-lAHnXrxJ.js";import{M as U}from"./Modal-BhZ5tikr.js";import{I as n}from"./InputLabel-eLaPbUJo.js";import{T as h}from"./TextInput-C-k5QKru.js";import{I as r}from"./InputError-SIa_hYom.js";import{P as x}from"./PrimaryButton-BTZcH_bs.js";import{S as A}from"./SecondaryButton-B17rFZm-.js";import"./ApplicationLogo-CUVqsJO0.js";function Q({posts:d}){const[p,s]=u.useState(!1),[l,c]=u.useState(null),{data:o,setData:a,post:g,put:f,delete:j,processing:v,errors:i,reset:b}=P({title:"",content:"",status:"draft",image:""}),N=()=>{c(null),b(),s(!0)},y=t=>{c(t),a({title:t.title,content:t.content||"",status:t.status,image:t.image||""}),s(!0)},C=t=>{t.preventDefault(),l?f(route("admin.posts.update",l.id),{onSuccess:()=>s(!1)}):g(route("admin.posts.store"),{onSuccess:()=>s(!1)})},k=t=>{confirm("Are you sure you want to delete this post?")&&j(route("admin.posts.destroy",t))},w=[{header:"Title",accessor:"title",className:"font-semibold"},{header:"Author",accessor:"author.name",render:t=>t.author?.name||"Unknown"},{header:"Date",render:t=>new Date(t.created_at).toLocaleDateString()},{header:"Status",render:t=>{let m="gray";return t.status==="published"&&(m="green"),e.jsx(T,{variant:m,children:t.status.toUpperCase()})}}];return e.jsxs(I,{header:"Blog Posts",children:[e.jsx(S,{title:"Blog Management"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Blog Posts"}),e.jsx(x,{onClick:N,children:"+ New Post"})]}),e.jsx(M,{children:e.jsx("div",{className:"p-0",children:e.jsx(F,{columns:w,data:d.data,pagination:d,actions:t=>e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>y(t),className:"text-indigo-600 hover:text-indigo-900 font-semibold",children:"Edit"}),e.jsx("button",{onClick:()=>k(t.id),className:"text-rose-600 hover:text-rose-900 font-semibold",children:"Delete"})]})})})})]}),e.jsx(U,{show:p,onClose:()=>s(!1),maxWidth:"2xl",children:e.jsxs("form",{onSubmit:C,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-6",children:l?"Edit Post":"Create New Post"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",value:"Post Title"}),e.jsx(h,{id:"title",className:"mt-1 block w-full text-lg",value:o.title,onChange:t=>a("title",t.target.value),required:!0}),e.jsx(r,{message:i.title,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:o.status,onChange:t=>a("status",t.target.value),required:!0,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]}),e.jsx(r,{message:i.status,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"image",value:"Featured Image URL"}),e.jsx(h,{id:"image",className:"mt-1 block w-full",value:o.image,onChange:t=>a("image",t.target.value),placeholder:"https://..."}),e.jsx(r,{message:i.image,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"content",value:"Post Content",className:"mb-2"}),e.jsx(E,{licenseKey:"gpl",value:o.content,init:{height:400,menubar:!0,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | image link code help",skin:!1,content_css:!1,content_style:`${B}
${D}`},onEditorChange:t=>a("content",t)}),e.jsx(r,{message:i.content,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(A,{onClick:()=>s(!1),children:"Cancel"}),e.jsx(x,{disabled:v,children:l?"Update Post":"Publish Post"})]})]})})]})}export{Q as default};
