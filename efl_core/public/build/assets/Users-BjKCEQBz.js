import{d as n,u as I,j as e,H as _}from"./vendor-BLTBOi2W.js";import{A as O}from"./AuthenticatedLayout-DNdVW90a.js";import{M as w}from"./Modal-BhZ5tikr.js";import{P as N}from"./PrimaryButton-BTZcH_bs.js";import{S as v}from"./SecondaryButton-B17rFZm-.js";import{T as d}from"./TextInput-C-k5QKru.js";import{I as r}from"./InputLabel-eLaPbUJo.js";import{I as m}from"./InputError-SIa_hYom.js";import{D as P}from"./DangerButton-96vNK6M1.js";import"./ApplicationLogo-CUVqsJO0.js";function K({users:y}){const[b,c]=n.useState(!1),[C,p]=n.useState(!1),[a,u]=n.useState(null),[h,j]=n.useState(null),{data:l,setData:t,post:k,put:M,delete:D,processing:g,errors:o,reset:f}=I({name:"",email:"",password:"",password_confirmation:"",role:"student"}),S=()=>{u(null),f(),c(!0)},U=s=>{u(s),t({name:s.name,email:s.email,password:"",password_confirmation:"",role:s.role}),c(!0)},A=s=>{j(s),p(!0)},i=()=>{c(!1),f()},x=()=>{p(!1),j(null)},E=s=>{s.preventDefault(),a?M(route("admin.users.update",a.id),{onSuccess:()=>i()}):k(route("admin.users.store"),{onSuccess:()=>i()})},F=()=>{h&&D(route("admin.users.destroy",h.id),{onSuccess:()=>x()})};return e.jsxs(O,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Manage Users"}),children:[e.jsx(_,{title:"Manage Users"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold",children:"All Users"}),e.jsx(N,{onClick:S,children:"Add User"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                                                        ${s.role==="admin"?"bg-purple-100 text-purple-800":s.role==="staff"?"bg-blue-100 text-blue-800":s.role==="author"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:s.role})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>U(s),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>A(s),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},s.id))})]})})]})})})}),e.jsx(w,{show:b,onClose:i,children:e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:a?"Edit User":"Create New User"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"name",value:"Name"}),e.jsx(d,{id:"name",type:"text",value:l.name,onChange:s=>t("name",s.target.value),className:"mt-1 block w-full",isFocused:!0}),e.jsx(m,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"email",value:"Email"}),e.jsx(d,{id:"email",type:"email",value:l.email,onChange:s=>t("email",s.target.value),className:"mt-1 block w-full"}),e.jsx(m,{message:o.email,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"role",value:"Role"}),e.jsxs("select",{id:"role",value:l.role,onChange:s=>t("role",s.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"author",children:"Author"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx(m,{message:o.role,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"password",value:a?"Password (Leave blank to keep current)":"Password"}),e.jsx(d,{id:"password",type:"password",value:l.password,onChange:s=>t("password",s.target.value),className:"mt-1 block w-full"}),e.jsx(m,{message:o.password,className:"mt-2"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(r,{htmlFor:"password_confirmation",value:"Confirm Password"}),e.jsx(d,{id:"password_confirmation",type:"password",value:l.password_confirmation,onChange:s=>t("password_confirmation",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(v,{onClick:i,children:"Cancel"}),e.jsx(N,{disabled:g,children:a?"Update":"Create"})]})]})}),e.jsx(w,{show:C,onClose:x,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to delete this user?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Once this account is deleted, all of its resources and data will be permanently deleted."}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx(v,{onClick:x,children:"Cancel"}),e.jsx(P,{onClick:F,disabled:g,children:"Delete Account"})]})]})})]})}export{K as default};
